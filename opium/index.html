<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>index (opium.index)</title><link rel="stylesheet" href="../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ opium</nav><h1 id="opium"><a href="#opium" class="anchor"></a>Opium</h1><p>Welcome to Opium's documentation!</p><nav class="toc"><ul><li><a href="#overview">Overview</a></li><li><a href="#installation">Installation</a><ul><li><a href="#install-with-opam">Install with Opam</a></li><li><a href="#install-with-esy">Install with Esy</a></li><li><a href="#use-in-a-dune-project">Use in a Dune project</a></li></ul></li><li><a href="#getting-started">Getting Started</a></li><li><a href="#api-documentation">API documentation</a></li></ul></nav></header><h2 id="overview"><a href="#overview" class="anchor"></a>Overview</h2><p>Opium is a web framework for OCaml.</p><h2 id="installation"><a href="#installation" class="anchor"></a>Installation</h2><p>In order to build an Opium app, you will need to install a few dependencies on your system. You can use either Esy to Opam for this.</p><h3 id="install-with-opam"><a href="#install-with-opam" class="anchor"></a>Install with Opam</h3><p>To install Opium with <code>opam</code>, you can run <code>opam install opium</code>. You can then run <code>opam info opium</code> to make sure the library has been installed correctly.</p><h3 id="install-with-esy"><a href="#install-with-esy" class="anchor"></a>Install with Esy</h3><p>To install Opium with <code>esy</code>, you can run <code>esy add @opam/opium</code>, this will add an entry <code>&quot;@opam/opium&quot;: &quot;*&quot;</code> to your <code>package.json</code> and install the dependency. You can then run <code>esy ls-modules</code> to make sure the library has been installed correctly.</p><h3 id="use-in-a-dune-project"><a href="#use-in-a-dune-project" class="anchor"></a>Use in a Dune project</h3><p>To use Opium in your dune project, you can add <code>opium</code> to the <code>libraries</code> stanza in your dune file.</p><p>If you are building a library, this will look like this:</p><pre><code class="ml">(library
  (public_name mylib)
  (libraries opium))</code></pre><p>And for an executable:</p><pre><code class="ml">(executable
  (public_name myexe)
  (libraries opium))</code></pre><p>That's it, you can now start using <code>Opium</code>!</p><h2 id="getting-started"><a href="#getting-started" class="anchor"></a>Getting Started</h2><p>Here is an example of a simple Opium application:</p><pre><code class="ml">open Opium

let hello _req = Response.of_plain_text &quot;Hello World&quot; |&gt; Lwt.return

let greet req =
  let name = Router.param req &quot;name&quot; in
  Printf.sprintf &quot;Hello, %s&quot; name |&gt; Response.of_plain_text |&gt; Lwt.return

let () =
  let open App in
  App.empty
  |&gt; App.get &quot;/&quot; hello
  |&gt; App.get &quot;/greet/:name&quot; greet
  |&gt; App.run_command
  |&gt; ignore</code></pre><p>When run, the executable will start an HTTP server with two endpoints:</p><ul><li><code>/</code> will return a <code>text/plain</code> response with the content <code>&quot;Hello World&quot;</code></li><li><code>/greet/:name</code> will return a <code>text/plain</code> response with a greeting of the name passed in the URL</li></ul><h2 id="api-documentation"><a href="#api-documentation" class="anchor"></a>API documentation</h2><ul class="modules"><li><a href="Opium/index.html"><code>Opium</code></a></li></ul></div></body></html>