<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>App (opium.Opium__.App)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">opium</a> &#x00BB; <a href="../index.html">Opium__</a> &#x00BB; App</nav><h1>Module <code>Opium__.App</code></h1></header><aside><p>An opium app provides a set of convenience functions and types to construct a rock app.</p><ul><li>Re-exporting common functions needed in handlers</li><li>Easy handling of routes and bodies</li><li>Automatic generation of a command line app</li></ul></aside><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>An opium app is a simple builder wrapper around a rock app</p></dd></dl><dl><dt class="spec value" id="val-to_handler"><a href="#val-to_handler" class="anchor"></a><code><span class="keyword">val</span> to_handler : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../rock/Rock/Handler/index.html#type-t">Rock.Handler.t</a></code></dt><dd><p><code>to_handler t</code> converts the app t to a <code>Rock</code> handler.</p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <a href="index.html#type-t">t</a></code></dt><dd><p>A basic empty app</p></dd></dl><dl><dt class="spec type" id="type-builder"><a href="#type-builder" class="anchor"></a><code><span class="keyword">type</span> builder</code><code> = <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>A builder is a function that transforms an <code>app</code> by adding some functionality. Builders are usuallys composed with a base app using (|&gt;) to create a full app</p></dd></dl><dl><dt class="spec value" id="val-host"><a href="#val-host" class="anchor"></a><code><span class="keyword">val</span> host : string <span>&#45;&gt;</span> <a href="index.html#type-builder">builder</a></code></dt><dt class="spec value" id="val-backlog"><a href="#val-backlog" class="anchor"></a><code><span class="keyword">val</span> backlog : int <span>&#45;&gt;</span> <a href="index.html#type-builder">builder</a></code></dt><dd><p><code>backlog</code> specifies the maximum number of clients that can have a pending connection request to the Opium server.</p></dd></dl><dl><dt class="spec value" id="val-port"><a href="#val-port" class="anchor"></a><code><span class="keyword">val</span> port : int <span>&#45;&gt;</span> <a href="index.html#type-builder">builder</a></code></dt><dt class="spec value" id="val-ssl"><a href="#val-ssl" class="anchor"></a><code><span class="keyword">val</span> ssl : <span>cert:string</span> <span>&#45;&gt;</span> <span>key:string</span> <span>&#45;&gt;</span> <a href="index.html#type-builder">builder</a></code></dt><dt class="spec value" id="val-cmd_name"><a href="#val-cmd_name" class="anchor"></a><code><span class="keyword">val</span> cmd_name : string <span>&#45;&gt;</span> <a href="index.html#type-builder">builder</a></code></dt><dt class="spec value" id="val-not_found"><a href="#val-not_found" class="anchor"></a><code><span class="keyword">val</span> not_found : <span>(<a href="../../Opium/Request/index.html#type-t">Opium.Request.t</a> <span>&#45;&gt;</span> <span><span>(<a href="../../Opium/Headers/index.html#type-t">Opium.Headers.t</a> * <a href="../../Opium/Body/index.html#type-t">Opium.Body.t</a>)</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <a href="index.html#type-builder">builder</a></code></dt><dd><p><code>not_found</code> accepts a regular Opium handler that will be used instead of the default 404 handler.</p></dd></dl><dl><dt class="spec type" id="type-route"><a href="#type-route" class="anchor"></a><code><span class="keyword">type</span> route</code><code> = string <span>&#45;&gt;</span> <a href="../../../rock/Rock/Handler/index.html#type-t">Rock.Handler.t</a> <span>&#45;&gt;</span> <a href="index.html#type-builder">builder</a></code></dt><dd><p>A route is a function that returns a buidler that hooks up a handler to a url mapping</p></dd></dl><aside><p>Method specific routes</p></aside><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <a href="index.html#type-route">route</a></code></dt><dt class="spec value" id="val-post"><a href="#val-post" class="anchor"></a><code><span class="keyword">val</span> post : <a href="index.html#type-route">route</a></code></dt><dt class="spec value" id="val-delete"><a href="#val-delete" class="anchor"></a><code><span class="keyword">val</span> delete : <a href="index.html#type-route">route</a></code></dt><dt class="spec value" id="val-put"><a href="#val-put" class="anchor"></a><code><span class="keyword">val</span> put : <a href="index.html#type-route">route</a></code></dt><dt class="spec value" id="val-options"><a href="#val-options" class="anchor"></a><code><span class="keyword">val</span> options : <a href="index.html#type-route">route</a></code></dt><dt class="spec value" id="val-head"><a href="#val-head" class="anchor"></a><code><span class="keyword">val</span> head : <a href="index.html#type-route">route</a></code></dt><dt class="spec value" id="val-patch"><a href="#val-patch" class="anchor"></a><code><span class="keyword">val</span> patch : <a href="index.html#type-route">route</a></code></dt><dt class="spec value" id="val-any"><a href="#val-any" class="anchor"></a><code><span class="keyword">val</span> any : <span><a href="../../Opium/Method/index.html#type-t">Opium.Method.t</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-route">route</a></code></dt><dd><p>any <code>methods</code> will bind a route to any http method inside of <code>methods</code></p></dd></dl><dl><dt class="spec value" id="val-all"><a href="#val-all" class="anchor"></a><code><span class="keyword">val</span> all : <a href="index.html#type-route">route</a></code></dt><dd><p>all <code>methods</code> will bind a route to a URL regardless of the http method. You may escape the actual method used from the request passed.</p></dd></dl><dl><dt class="spec value" id="val-action"><a href="#val-action" class="anchor"></a><code><span class="keyword">val</span> action : <a href="../../Opium/Method/index.html#type-t">Opium.Method.t</a> <span>&#45;&gt;</span> <a href="index.html#type-route">route</a></code></dt><dt class="spec value" id="val-middleware"><a href="#val-middleware" class="anchor"></a><code><span class="keyword">val</span> middleware : <a href="../../../rock/Rock/Middleware/index.html#type-t">Rock.Middleware.t</a> <span>&#45;&gt;</span> <a href="index.html#type-builder">builder</a></code></dt><dt class="spec value" id="val-start"><a href="#val-start" class="anchor"></a><code><span class="keyword">val</span> start : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>Lwt_io.server Lwt.t</span></code></dt><dd><p>Start an opium server. The thread returned can be cancelled to shutdown the server</p></dd></dl><dl><dt class="spec value" id="val-run_command"><a href="#val-run_command" class="anchor"></a><code><span class="keyword">val</span> run_command : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Create a cmdliner command from an app and run lwt's event loop</p></dd></dl><dl><dt class="spec value" id="val-run_command'"><a href="#val-run_command'" class="anchor"></a><code><span class="keyword">val</span> run_command' : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>[&gt; <span>`Ok of <span>unit Lwt.t</span></span> <span>| `Error</span> <span>| `Not_running</span> ]</span></code></dt></dl></div></body></html>