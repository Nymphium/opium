<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>index (rock.index)</title><link rel="stylesheet" href="../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ rock</nav><h1 id="rock"><a href="#rock" class="anchor"></a>Rock</h1><p>Rock provides finagle inspired Service/Filter abstractions to write HTTP services.</p><nav class="toc"><ul><li><a href="#filters">Filters</a></li><li><a href="#services">Services</a></li><li><a href="#api-documentation">API documentation</a></li></ul></nav></header><h3 id="services"><a href="#services" class="anchor"></a>Services</h3><p>Services are simple functions that work on a request, and returns a promise representing the eventual result (or failure). Its represented with the following type:</p><pre><code class="ml">type ('req, 'res) t = 'req -&gt; 'res Lwt.t</code></pre><p>Services can be used to represent any operation and not necessarily something related to HTTP. As an example we can have a service that works on integers and returns a string response:</p><pre><code class="ml">let my_simple_service : (int, string) Service.t =
  fun request -&gt; Lwt.return (string_of_int request)
;;</code></pre><p>In Rock HTTP handlers are also represented as services. They have the type:</p><pre><code class="ml">type handler = (Request.t, Response.t) Service.t</code></pre><p>With this type, one can have an HTTP server like:</p><pre><code class="ml">open Rock.Rock

let http_service req =
  Lwt.return (Response.of_string &quot;Hello World\n&quot;)
;;</code></pre><p>Services (For web services these are Rock.Handler) are used to implement an application's business logic.</p><h3 id="filters"><a href="#filters" class="anchor"></a>Filters</h3><p>Filters are also functions, instead of a request they work on services. They can be used to transform a service by performing some specific functions on the request or response, before/after the user's http service. This can be useful to enhance your application with some functionality that needs to shared by multiple services, things like logging, compression, authentication etc.</p><p>Example of a simple filter working on the service defined earlier in the page:</p><pre><code class="ml">let add_two_filter service =
  fun req -&gt;
    service (req + 2)
;;

let new_service = add_two_filter my_simple_service;;</code></pre><h2 id="api-documentation"><a href="#api-documentation" class="anchor"></a>API documentation</h2><ul class="modules"><li><a href="Rock/index.html"><code>Rock</code></a></li></ul></div></body></html>