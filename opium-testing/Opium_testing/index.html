<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Opium_testing (opium-testing.Opium_testing)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">opium-testing</a> &#x00BB; Opium_testing</nav><h1>Module <code>Opium_testing</code></h1><p>This module provides helpers to easily test Opium applications with Alcotest.</p><nav class="toc"><ul><li><a href="#testable"><code>Testable</code></a></li><li><a href="#handle_request"><code>handle_request</code></a></li><li><a href="#check_status"><code>check_status</code></a></li><li><a href="#check_status'"><code>check_status'</code></a></li><li><a href="#check_meth"><code>check_meth</code></a></li><li><a href="#check_meth'"><code>check_meth'</code></a></li><li><a href="#check_version"><code>check_version</code></a></li><li><a href="#check_version'"><code>check_version'</code></a></li><li><a href="#check_body"><code>check_body</code></a></li><li><a href="#check_body'"><code>check_body'</code></a></li><li><a href="#check_request"><code>check_request</code></a></li><li><a href="#check_request'"><code>check_request'</code></a></li><li><a href="#check_response"><code>check_response</code></a></li><li><a href="#check_response'"><code>check_response'</code></a></li><li><a href="#check_cookie"><code>check_cookie</code></a></li><li><a href="#check_cookie'"><code>check_cookie'</code></a></li><li><a href="#check_body_contains"><code>check_body_contains</code></a></li></ul></nav></header><section><header><h4 id="testable"><a href="#testable" class="anchor"></a><code>Testable</code></h4></header><dl><dt class="spec module" id="module-Testable"><a href="#module-Testable" class="anchor"></a><code><span class="keyword">module</span> <a href="Testable/index.html">Testable</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Collection of <code>Alcotest</code> testables for <code>Opium</code> types.</p></dd></dl></section><section><header><h4 id="handle_request"><a href="#handle_request" class="anchor"></a><code>handle_request</code></h4></header><dl><dt class="spec value" id="val-handle_request"><a href="#val-handle_request" class="anchor"></a><code><span class="keyword">val</span> handle_request : <a href="../../opium/Opium/App/index.html#type-t">Opium.App.t</a> <span>&#45;&gt;</span> <a href="../../opium/Opium/Request/index.html#type-t">Opium.Request.t</a> <span>&#45;&gt;</span> <span><a href="../../opium/Opium/Response/index.html#type-t">Opium.Response.t</a> Lwt.t</span></code></dt><dd><p><code>handle_request app request response</code> processes a request <code>request</code> with the given Opium application <code>app</code>.</p><p>It processes the request the same <code>Opium.Server_connection.run</code> would and returns the generated response.</p></dd></dl></section><section><header><h4 id="check_status"><a href="#check_status" class="anchor"></a><code>check_status</code></h4></header><dl><dt class="spec value" id="val-check_status"><a href="#val-check_status" class="anchor"></a><code><span class="keyword">val</span> check_status : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <a href="../../opium/Opium/Status/index.html#type-t">Opium.Status.t</a> <span>&#45;&gt;</span> <a href="../../opium/Opium/Status/index.html#type-t">Opium.Status.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_status ?msg t1 t2</code> checks that the status <code>t1</code> and <code>t2</code> are equal.</p></dd></dl></section><section><header><h4 id="check_status'"><a href="#check_status'" class="anchor"></a><code>check_status'</code></h4></header><dl><dt class="spec value" id="val-check_status'"><a href="#val-check_status'" class="anchor"></a><code><span class="keyword">val</span> check_status' : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <span>expected:<a href="../../opium/Opium/Status/index.html#type-t">Opium.Status.t</a></span> <span>&#45;&gt;</span> <span>actual:<a href="../../opium/Opium/Status/index.html#type-t">Opium.Status.t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_status' ?msg t1 t2</code> checks that the status <code>t1</code> and <code>t2</code> are equal.</p><p>This is a labeled variant of <a href="index.html#check_status"><span><code>check_status</code></span></a></p></dd></dl></section><section><header><h4 id="check_meth"><a href="#check_meth" class="anchor"></a><code>check_meth</code></h4></header><dl><dt class="spec value" id="val-check_meth"><a href="#val-check_meth" class="anchor"></a><code><span class="keyword">val</span> check_meth : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <a href="../../opium/Opium/Method/index.html#type-t">Opium.Method.t</a> <span>&#45;&gt;</span> <a href="../../opium/Opium/Method/index.html#type-t">Opium.Method.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_meth ?msg t1 t2</code> checks that the method <code>t1</code> and <code>t2</code> are equal.</p></dd></dl></section><section><header><h4 id="check_meth'"><a href="#check_meth'" class="anchor"></a><code>check_meth'</code></h4></header><dl><dt class="spec value" id="val-check_meth'"><a href="#val-check_meth'" class="anchor"></a><code><span class="keyword">val</span> check_meth' : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <span>expected:<a href="../../opium/Opium/Method/index.html#type-t">Opium.Method.t</a></span> <span>&#45;&gt;</span> <span>actual:<a href="../../opium/Opium/Method/index.html#type-t">Opium.Method.t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_meth' ?msg t1 t2</code> checks that the method <code>t1</code> and <code>t2</code> are equal.</p><p>This is a labeled variant of <a href="index.html#check_meth"><span><code>check_meth</code></span></a></p></dd></dl></section><section><header><h4 id="check_version"><a href="#check_version" class="anchor"></a><code>check_version</code></h4></header><dl><dt class="spec value" id="val-check_version"><a href="#val-check_version" class="anchor"></a><code><span class="keyword">val</span> check_version : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <a href="../../opium/Opium/Version/index.html#type-t">Opium.Version.t</a> <span>&#45;&gt;</span> <a href="../../opium/Opium/Version/index.html#type-t">Opium.Version.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_version ?msg t1 t2</code> checks that the version <code>t1</code> and <code>t2</code> are equal.</p></dd></dl></section><section><header><h4 id="check_version'"><a href="#check_version'" class="anchor"></a><code>check_version'</code></h4></header><dl><dt class="spec value" id="val-check_version'"><a href="#val-check_version'" class="anchor"></a><code><span class="keyword">val</span> check_version' : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <span>expected:<a href="../../opium/Opium/Version/index.html#type-t">Opium.Version.t</a></span> <span>&#45;&gt;</span> <span>actual:<a href="../../opium/Opium/Version/index.html#type-t">Opium.Version.t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_version' ?msg t1 t2</code> checks that the version <code>t1</code> and <code>t2</code> are equal.</p><p>This is a labeled variant of <a href="index.html#check_version"><span><code>check_version</code></span></a></p></dd></dl></section><section><header><h4 id="check_body"><a href="#check_body" class="anchor"></a><code>check_body</code></h4></header><dl><dt class="spec value" id="val-check_body"><a href="#val-check_body" class="anchor"></a><code><span class="keyword">val</span> check_body : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <a href="../../opium/Opium/Body/index.html#type-t">Opium.Body.t</a> <span>&#45;&gt;</span> <a href="../../opium/Opium/Body/index.html#type-t">Opium.Body.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_body ?msg t1 t2</code> checks that the body <code>t1</code> and <code>t2</code> are equal.</p></dd></dl></section><section><header><h4 id="check_body'"><a href="#check_body'" class="anchor"></a><code>check_body'</code></h4></header><dl><dt class="spec value" id="val-check_body'"><a href="#val-check_body'" class="anchor"></a><code><span class="keyword">val</span> check_body' : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <span>expected:<a href="../../opium/Opium/Body/index.html#type-t">Opium.Body.t</a></span> <span>&#45;&gt;</span> <span>actual:<a href="../../opium/Opium/Body/index.html#type-t">Opium.Body.t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_body' ?msg t1 t2</code> checks that the body <code>t1</code> and <code>t2</code> are equal.</p><p>This is a labeled variant of <a href="index.html#check_body"><span><code>check_body</code></span></a></p></dd></dl></section><section><header><h4 id="check_request"><a href="#check_request" class="anchor"></a><code>check_request</code></h4></header><dl><dt class="spec value" id="val-check_request"><a href="#val-check_request" class="anchor"></a><code><span class="keyword">val</span> check_request : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <a href="../../opium/Opium/Request/index.html#type-t">Opium.Request.t</a> <span>&#45;&gt;</span> <a href="../../opium/Opium/Request/index.html#type-t">Opium.Request.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_request ?msg t1 t2</code> checks that the request <code>t1</code> and <code>t2</code> are equal.</p></dd></dl></section><section><header><h4 id="check_request'"><a href="#check_request'" class="anchor"></a><code>check_request'</code></h4></header><dl><dt class="spec value" id="val-check_request'"><a href="#val-check_request'" class="anchor"></a><code><span class="keyword">val</span> check_request' : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <span>expected:<a href="../../opium/Opium/Request/index.html#type-t">Opium.Request.t</a></span> <span>&#45;&gt;</span> <span>actual:<a href="../../opium/Opium/Request/index.html#type-t">Opium.Request.t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_request' ?msg t1 t2</code> checks that the request <code>t1</code> and <code>t2</code> are equal.</p><p>This is a labeled variant of <a href="index.html#check_request"><span><code>check_request</code></span></a></p></dd></dl></section><section><header><h4 id="check_response"><a href="#check_response" class="anchor"></a><code>check_response</code></h4></header><dl><dt class="spec value" id="val-check_response"><a href="#val-check_response" class="anchor"></a><code><span class="keyword">val</span> check_response : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <a href="../../opium/Opium/Response/index.html#type-t">Opium.Response.t</a> <span>&#45;&gt;</span> <a href="../../opium/Opium/Response/index.html#type-t">Opium.Response.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_response ?msg t1 t2</code> checks that the response <code>t1</code> and <code>t2</code> are equal.</p></dd></dl></section><section><header><h4 id="check_response'"><a href="#check_response'" class="anchor"></a><code>check_response'</code></h4></header><dl><dt class="spec value" id="val-check_response'"><a href="#val-check_response'" class="anchor"></a><code><span class="keyword">val</span> check_response' : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <span>expected:<a href="../../opium/Opium/Response/index.html#type-t">Opium.Response.t</a></span> <span>&#45;&gt;</span> <span>actual:<a href="../../opium/Opium/Response/index.html#type-t">Opium.Response.t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_response' ?msg t1 t2</code> checks that the response <code>t1</code> and <code>t2</code> are equal.</p><p>This is a labeled variant of <a href="index.html#check_response"><span><code>check_response</code></span></a></p></dd></dl></section><section><header><h4 id="check_cookie"><a href="#check_cookie" class="anchor"></a><code>check_cookie</code></h4></header><dl><dt class="spec value" id="val-check_cookie"><a href="#val-check_cookie" class="anchor"></a><code><span class="keyword">val</span> check_cookie : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <a href="../../opium/Opium/Cookie/index.html#type-t">Opium.Cookie.t</a> <span>&#45;&gt;</span> <a href="../../opium/Opium/Cookie/index.html#type-t">Opium.Cookie.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_cookie ?msg t1 t2</code> checks that the cookie <code>t1</code> and <code>t2</code> are equal.</p></dd></dl></section><section><header><h4 id="check_cookie'"><a href="#check_cookie'" class="anchor"></a><code>check_cookie'</code></h4></header><dl><dt class="spec value" id="val-check_cookie'"><a href="#val-check_cookie'" class="anchor"></a><code><span class="keyword">val</span> check_cookie' : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> <span>expected:<a href="../../opium/Opium/Cookie/index.html#type-t">Opium.Cookie.t</a></span> <span>&#45;&gt;</span> <span>actual:<a href="../../opium/Opium/Cookie/index.html#type-t">Opium.Cookie.t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_cookie' ?msg t1 t2</code> checks that the cookie <code>t1</code> and <code>t2</code> are equal.</p><p>This is a labeled variant of <a href="index.html#check_cookie"><span><code>check_cookie</code></span></a></p></dd></dl></section><section><header><h4 id="check_body_contains"><a href="#check_body_contains" class="anchor"></a><code>check_body_contains</code></h4></header><dl><dt class="spec value" id="val-check_body_contains"><a href="#val-check_body_contains" class="anchor"></a><code><span class="keyword">val</span> check_body_contains : <span>?&#8288;msg:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../../opium/Opium/Body/index.html#type-t">Opium.Body.t</a> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dd><p><code>check_body_contains ?msg s t</code> checks that the body <code>t</code> contains the string <code>s</code>.</p></dd></dl></section></div></body></html>